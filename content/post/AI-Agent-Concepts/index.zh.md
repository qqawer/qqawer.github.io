---
title: "AI自动化协作体系中的关键概念解析"
description: "AI智能体、函数调用与MCP协议核心概念笔记"
date: 2026-02-21
slug: "ai-agent-collaboration-concepts"
categories:
    - Documentation
tags:
    - AI
    - Agent
    - LLM
    - MCP
toc: true
---

# AI自动化协作体系中的关键概念解析

![AI自动化协作体系](image.png.avif)

## 1. 初始AI模型交互与提示词演进

### 1.1 用户提示词 (User Prompt)

- **定义**：用户发给AI模型的请求，通常是具体的问题或表达的意图。
- **局限性**：
  - AI模型缺乏预设的“人设”或“背景”。
  - 只能得到通用、中规中矩的回答，缺乏个性化和准确性。
  - 即使追加相同的问答，也无法脱离不同的上下文获得稳定且差异化的反馈。

### 1.2 系统提示词 (System Prompt)

- **产生背景**：为解决AI模型缺乏人设的问题，早期探索尝试在每次信息与用户请求对话的同一侧展示用户提示词中，但这使得请求内容显得不对称。
- **定义**：为AI模型注入角色、性格、背景信息、语气等独立边界的提示信息，只要不是用户直接表达的内容，都可以放置于系统提示词中。
- **机制**：首次向模型发出或用户端请求时，系统也会将其根据通常在一并发送给AI模型，进行背景定格。
- **应用场景**：
  - 聊天机器人或对话拟人中，系统首先设定角色的基准时效，用户无法直接修改。
  - 部分平台（如ChatGPT的Customized ChatGPT功能）允许用户自定义偏好，这些偏好会在后台整合为系统提示词的一部分。

## 2. AI智能体 (AI Agent) 及其工具 (Agent Tool)

### 2.1 AI Agent的引入

- **需求背景**：AI模型仅能提供纯文本逻辑建议，无法去主执行任务。
- **概念**：
  - **AI Agent**：具备AI模型、工具和直连用户之间进行协调的调度的程序。
  - **Agent Tool**：提供给AI模型调用的函数或服务。
- **早期实践 (AutoGPT示例)**：
  - **AutoGPT架构**：一个本地运行的小程序。
  - **工具注册**：提前先编写并注册文件管理函数（如 `list_files`, `read_files`），并提供其功能描述和使用方法。
  - **系统提示词生成**：AutoGPT将注册的工具信息，生成一个系统提示词，告诉AI模型可用的工具，其功能以及调用时的应该返回的格式。
  - **任务流程**：
    1. 用户提交（例如“帮我找一段源码的投资信息”）与包含工具信息的系统提示词一并发送给AI模型。
    2. AI模型基于其智能，会根据需求格式返回一个调用特定函数的请求。
    3. AutoGPT解析请求，调用对应函数。
    4. 将函数执行结果返回给AI模型。
    5. AI模型根据结果决定下一步操作。
    6. 此过程反复进行，直至任务完成。

### 2.2 早期Agent架构的演进

- **格式不稳定期**：AI模型作为纯文本模型，即使在系统提示词中明确规定了返回格式，依然可能返回格式不符的内容。
- **解决思路 (基于硬解析)**：许多AI Agent在解析到返回值格式错误时，会自动进行重试。
- **现状**：部分早期Agent（如Kimi）仍采用此方式，但重试机制增加了不确定性和开发复杂度。

## 3. 函数调用 (Function Calling)

### 3.1 Function Calling的提出

- **背景**：为解决早期Agent架构中AI返回格式不确定的问题，大模型厂商（如ChatGPT、Claude、Gemini）推出了Function Calling功能。
- **核心思想**：统一工具描述和AI调用工具时的结构格式规范。

### 3.2 Function Calling的机制

- **工具描述标准化**：
  - 每个工具都使用JSON对象进行定义。
  - 工具名（`name`）、功能说明（`description`）、所需参数（`parameters`）等字段都被标准化。
  - 这些JSON对象不再置于系统提示词中，而是作为独立参数传入模型。
- **AI返回格式固定**：Function Calling明确规定了AI模型调用工具时的返回格式，从而消除了系统提示词对特定格式的需要。
- **优化表现**：
  - 剥离工具描述使应用格式统一。
  - AI模型提供工具的回复格式也得到统一。
  - 便于大模型厂商提供针对性的在线AI模型，使其更好的理解和执行工具调用任务。
  - 使得AI决策过程清晰明确，有助于格式演进。AI能更精准地在特定频率进行激活，用户毫无感知，降低了用户端处理复杂度和重试成本的Token开支。

### 3.3 Function Calling的局限性

- **缺乏统一标准**：各大厂商的API定义不同，未形成行业通用标准。
- **兼容性问题**：许多开源模型尚未支持Function Calling。
- **现状**：Function Calling与系统提示词仍将并行存在线上共存，且各在各应用场景下不可分离。

## 4. MCP协议 (Agent与Tool服务的通信)

### 4.1 MCP的诞生背景

- **问题**：某些Agent Tool如遇有跨端或跨域（如网页/远程工具），若每个Agent都独立编写一份代码，将导致重复且不规范。
- **解决方案**：将Agent Tool服务化，进行统一托管，伴随向Agent调用。

### 4.2 MCP定义与组件

- **定义**：MCP (Model Context Protocol) 是一个通信协议，专门用于规范Agent与Tool服务之间交互方式。
- **核心组件**：
  - **MCP Server**: 运行Agent Tool服务的服务器。
  - **MCP Client**: 调用MCP Server上Agent Tool服务的Agent。
- **MCP规范内容**：
  - 定义了MCP Server向MCP Client之间的通信方式。
  - 规定了MCP Server需提供给接口，例如查询可用的Tool、Tool功能描述、所需参数的格式等。

### 4.3 MCP Server提供的服务类型

- **Tool**: 提供函数调用形式的服务。
- **Resource**: 提供数据，类似于文件读取服务。
- **Prompt**: 为Agent提供提示词模板。

### 4.4 MCP的部署方式

- **本地运行**：可与Agent运行在同一台机器上，通过标准输入输出进行通信。
- **网络部署**：可部署在网络上，通过HTTP进行通信。

### 4.5 MCP与AI模型的关系

- **重要说明**：MCP是一个专门定制的标准，但其本身与AI模型无关。
- **职责**：MCP仅负责规范Agent与Tool服务的关系，处理调度和连接等，不关心Agent具体使用了哪个AI模型。

## 5. 整体流程梳理与相互关系

### 5.1 完整请求处理示例

1. **用户请求**：用户（作为MCP Client的一部分）向AI Agent提问（例如“帮我看看这本小说，应该是怎么打？”）。
2. **Agent封装**：AI Agent将用户请求封装为用户提示词。
3. **获取工具信息**：AI Agent通过MCP协议，从MCP Server获取所有可用的Agent Tool信息。
4. **发送至AI模型**：AI Agent将获取到的Agent Tool信息与用户提示词一并发送给AI模型。
5. **AI模型决策**：AI模型识别到可用的工具（例如“Web Browser”网页浏览工具），生成一个调用该工具的请求（以标准格式发送Function Calling格式），直接传给Agent。
6. **Agent调用工具**：AI Agent解析到工具调用请求后，通过MCP协议调用MCP Server上的“Web Browser”工具。
7. **工具执行与返回**：“Web Browser”工具执行规定动作，将网页内容返回给AI Agent。
8. **Agent转发**：AI Agent将网页内容转发给AI模型。
9. **AI模型生成答案**：AI模型根据网页内容和自身知识，生成最终答案（例如“攻略如下”）。
10. **Agent展示结果**：AI Agent将最终结果展示给用户。

### 5.2 关键概念间的关系

- **系统提示词、用户提示词、AI Agent、Agent Tool、Function Calling、MCP、AI模型**等概念并非相互取代，而是各司其职共同协作，共同构成了AI自动化协作的完整体系。

## 6. 时代变革与个人视角

- AI技术的进步引发社会各界对未来影响的关注。
- 在科技巨变中，普通人更处于被动接受变革的渠道。
- 理解AI Agent等基础概念，有助于个体更主动的应对时代挑战，探索新机遇。

> 笔记由AI整理，信息可能存在不准确，请谨慎参考
> AI can make mistakes, so double-check it
> @一键AI笔记侠
